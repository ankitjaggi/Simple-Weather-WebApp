<html>
<head>
	<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="semantic/semantic.min.css" rel="stylesheet" type="text/css">
    <link href="weather/css/weather-icons.css" rel="stylesheet" type="text/css">
<link href="http://bootswatch.com/darkly/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="weather/jquery.simpleWeather.min.js"></script>
<script src="semantic/semantic.min.js"></script>
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

<style>
body { 
  background: url(img/bg3.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
    @font-face {
    font-family: 'weather';
    src: url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.eot');
    src: url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.woff') format('woff'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.ttf') format('truetype'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.svg#artill_clean_weather_iconsRg') format('svg');
    font-weight: normal;
    font-style: normal;
}
.ui.cards .card {
  width: 500px;
}
.secdata {
    margin-top: -40px;
}
</style>
<title>Simple Weather App</title>
</head>
<body>
<div class="container">
    <h3>Simple Weather App</h3>
<input type="text" id="city" class="form-control" name="city" placeholder="Enter city, country, region and then press Enter">

<!-- <a href="#" class="btn btn-primary" id="submit">Add</a> -->
<br><br>
<div id="loading" style="display:none;">
    <img src="img/spinner.gif">
</div>
<div id="weather">
<div class='ui cards' id="insideweather">

</div>
</div>
<script>

$( "#city" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: "http://gd.geobytes.com/AutoCompleteCity",
          dataType: "jsonp",
          data: {
            q: request.term
          },
          success: function( data ) {
            response (data);

          }
        });
      },
      minLength: 2,
      select: function( event, ui ) {
        
        
        $("#city").val(ui.item.label);
        submitForm();
      },
      open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
    });


$("#weather").hide();
var count=0;
var citiesdata="";
$("#submit").click(function(e) {
	$("#loading").show();
	
	submitForm();

});

$("#city").keydown(function(e) {
	var keyCode = (e.keyCode ? e.keyCode : e.which);
	if(keyCode==13)
    {
		submitForm();
        $("#loading").show();
    }
});

$("#weather").click(function(e) {
	
	if((e.target.id).indexOf("remove")!=-1)
		{
			
		$("#card"+e.target.id.charAt((e.target.id.length)-1)).hide();
	}
});


function submitForm()
{
    var input = $("#city").val();
    
    loadWeather(input, '');
}

function loadWeather(location, woeid) {
  $.simpleWeather({
    location: location,
    woeid: woeid,
    unit: 'c',
    success: function(weather) {
        icon = setWeatherIcon(weather.code);
       
      weathericonvalue = icon+'&nbsp;'+weather.temp+'<sup>&deg;'+weather.units.temp+'</sup>';
      

      var result = "<div class='card' id='card"+count+"'><div class='content'><a href='#' id='remove"+count+"' class='right floated remove'><i id='remove"+count+"' class='right floated remove icon'></i></a><div class='header' id='location'><h3>"+weather.city+", "+weather.region+", "+weather.country+"</h3></div> <div class='meta' id='currentTime'>"+weather.updated+"</div><div class='meta' id='currentWeather'><h5>"+weather.currently+"</h5></div><div class='description' id='description'><h2>"+weathericonvalue+"</h2> <h4 class='right floated secdata'>Humidity: "+weather.humidity+"%<br>Pressure: "+weather.pressure+weather.units.pressure+"<br><i class='wi wi-strong-wind'></i> "+weather.wind.speed+" km/h<br><i class='wi wi-sunrise'></i>&nbsp;"+weather.sunrise+"<br><i class='wi wi-sunset'></i>&nbsp;"+weather.sunset+"</h4></div></div></div>";



      $("#insideweather").append(result);
      count++;
      $("#loading").hide();
      $("#weather").show();
        
      console.log(weather);
      $("#city").val('');
      
    },
    error: function(error) {
    	console.log(error);
        $("#loading").show();
      $("#weather").append('<p>'+error+'</p>');
    }
  });
}

	
        function setWeatherIcon(condid) {
 
  switch(condid) {
    case '0': var icon  = '<i class="wi wi-tornado"></i>';
    break;
    case '1': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '2': var icon  = '<i class="wi wi-tornado"></i>';
    break;
    case '3': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '4': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '5': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '6': var icon  = '<i class="wi wi-rain-mix"></i>';
    break;
    case '7': var icon  = '<i class="wi wi-rain-mix"></i>';
    break;
    case '8': var icon  = '<i class="wi wi-sprinkle"></i>';
    break;
    case '9': var icon  = '<i class="wi wi-sprinkle"></i>';
    break;
    case '10': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '11': var icon  = '<i class="wi wi-showers"></i>';
    break;
    case '12': var icon  = '<i class="wi wi-showers"></i>';
    break;
    case '13': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '14': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '15': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '16': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '17': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '18': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '19': var icon  = '<i class="wi wi-cloudy-gusts"></i>';
    break;
    case '20': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '21': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '22': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '23': var icon  = '<i class="wi wi-cloudy-gusts"></i>';
    break;
    case '24': var icon  = '<i class="wi wi-cloudy-windy"></i>';
    break;
    case '25': var icon  = '<i class="wi wi-thermometer"></i>';
    break;
    case '26': var icon  = '<i class="wi wi-cloudy"></i>';
    break;
    case '27': var icon  = '<i class="wi wi-night-cloudy"></i>';
    break;
    case '28': var icon  = '<i class="wi wi-day-cloudy"></i>';
    break;
    case '29': var icon  = '<i class="wi wi-night-cloudy"></i>';
    break;
    case '30': var icon  = '<i class="wi wi-day-cloudy"></i>';
    break;
    case '31': var icon  = '<i class="wi wi-night-clear"></i>';
    break;
    case '32': var icon  = '<i class="wi wi-day-sunny"></i>';
    break;
    case '33': var icon  = '<i class="wi wi-night-clear"></i>';
    break;
    case '34': var icon  = '<i class="wi wi-day-sunny-overcast"></i>';
    break;
    case '35': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '36': var icon  = '<i class="wi wi-day-sunny"></i>';
    break;
    case '37': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '38': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '39': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '40': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '41': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '42': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '43': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '44': var icon  = '<i class="wi wi-cloudy"></i>';
    break;
    case '45': var icon  = '<i class="wi wi-lightning"></i>';
    break;
    case '46': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '47': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '3200': var icon  =  '<i class="wi wi-cloud"></i>';
    break;
    default: var icon  =  '<i class="wi wi-cloud"></i>';
    break;
  }
 
  return icon;
 
}
        
        </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52527606-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
<html>
<head>
	<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="semantic/semantic.min.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="weather/jquery.simpleWeather.min.js"></script>
<script src="semantic/semantic.min.js"></script>
<link href="weather/css/weather-icons.css" rel="stylesheet" type="text/css">
<link href="http://bootswatch.com/lumen/bootstrap.min.css" rel="stylesheet">
<style>
    @font-face {
    font-family: 'weather';
    src: url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.eot');
    src: url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.woff') format('woff'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.ttf') format('truetype'),
         url('http://s3-us-west-2.amazonaws.com/s.cdpn.io/93/artill_clean_icons-webfont.svg#artill_clean_weather_iconsRg') format('svg');
    font-weight: normal;
    font-style: normal;
}
.ui.cards .card {
  width: 500px;
}

</style>
</head>
<body>
<div class="container">
<input type="text" id="city" name="city">
<a href="#" class="btn btn-primary" id="submit">Add</a>

<div id="weather">
<div class='ui cards' id="insideweather">

</div>
</div>
<script>
$("#weather").hide();
var count=0;
var citiesdata="";
$("#submit").click(function(e) {
	
	var input = $("#city").val();
	loadWeather(input, '');
	

});

$("#city").keydown(function(e) {
	var keyCode = (e.keyCode ? e.keyCode : e.which);
	if(keyCode==13)
		$('#submit').trigger('click');   
});

$("#weather").click(function(e) {
	
	if((e.target.id).indexOf("remove")!=-1)
		{
			
		$("#card"+e.target.id.charAt((e.target.id.length)-1)).hide();
	}
});

function loadWeather(location, woeid) {
  $.simpleWeather({
    location: location,
    woeid: woeid,
    unit: 'c',
    success: function(weather) {
        icon = setWeatherIcon(weather.code);
       
      weathericonvalue = icon+'&nbsp;'+weather.temp+'<sup>&deg;'+weather.units.temp+'</sup>';
      

      var result = "<div class='card' id='card"+count+"'><div class='content'><a href='#' id='remove"+count+"' class='right floated remove'><i id='remove"+count+"' class='right floated remove icon'></i></a><div class='header' id='location'><h3>"+weather.city+", "+weather.region+", "+weather.country+"</h3></div> <div class='meta' id='currentTime'>"+weather.updated+"</div><div class='meta' id='currentWeather'><h5>"+weather.currently+"</h5></div><div class='description' id='description'><h2>"+weathericonvalue+"</h2> <h4 class='right floated'>Humidity: "+weather.humidity+"%<br>Precipitation: "+weather.wind.speed+"<br>Wind: "+weather.wind.speed+" km/h</h4></div></div></div>";



      $("#insideweather").append(result);
      count++;
      $("#weather").show();
        
      console.log(weather);
      $("#city").val('');
      
    },
    error: function(error) {
    	console.log(error);
      $("#weather").append('<p>'+error+'</p>');
    }
  });
}

	function listCities()
	{
	$.getJSON('cities.json',function(data){
            console.log('success');
            $.each(data.country,function(i,emp){
                console.log(emp);
            });
        }).error(function(){
            console.log('error');
        });
	
	}
	
        function setWeatherIcon(condid) {
 
  switch(condid) {
    case '0': var icon  = '<i class="wi wi-tornado"></i>';
    break;
    case '1': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '2': var icon  = '<i class="wi wi-tornado"></i>';
    break;
    case '3': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '4': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '5': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '6': var icon  = '<i class="wi wi-rain-mix"></i>';
    break;
    case '7': var icon  = '<i class="wi wi-rain-mix"></i>';
    break;
    case '8': var icon  = '<i class="wi wi-sprinkle"></i>';
    break;
    case '9': var icon  = '<i class="wi wi-sprinkle"></i>';
    break;
    case '10': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '11': var icon  = '<i class="wi wi-showers"></i>';
    break;
    case '12': var icon  = '<i class="wi wi-showers"></i>';
    break;
    case '13': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '14': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '15': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '16': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '17': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '18': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '19': var icon  = '<i class="wi wi-cloudy-gusts"></i>';
    break;
    case '20': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '21': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '22': var icon  = '<i class="wi wi-fog"></i>';
    break;
    case '23': var icon  = '<i class="wi wi-cloudy-gusts"></i>';
    break;
    case '24': var icon  = '<i class="wi wi-cloudy-windy"></i>';
    break;
    case '25': var icon  = '<i class="wi wi-thermometer"></i>';
    break;
    case '26': var icon  = '<i class="wi wi-cloudy"></i>';
    break;
    case '27': var icon  = '<i class="wi wi-night-cloudy"></i>';
    break;
    case '28': var icon  = '<i class="wi wi-day-cloudy"></i>';
    break;
    case '29': var icon  = '<i class="wi wi-night-cloudy"></i>';
    break;
    case '30': var icon  = '<i class="wi wi-day-cloudy"></i>';
    break;
    case '31': var icon  = '<i class="wi wi-night-clear"></i>';
    break;
    case '32': var icon  = '<i class="wi wi-day-sunny"></i>';
    break;
    case '33': var icon  = '<i class="wi wi-night-clear"></i>';
    break;
    case '34': var icon  = '<i class="wi wi-day-sunny-overcast"></i>';
    break;
    case '35': var icon  = '<i class="wi wi-hail"></i>';
    break;
    case '36': var icon  = '<i class="wi wi-day-sunny"></i>';
    break;
    case '37': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '38': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '39': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '40': var icon  = '<i class="wi wi-storm-showers"></i>';
    break;
    case '41': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '42': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '43': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '44': var icon  = '<i class="wi wi-cloudy"></i>';
    break;
    case '45': var icon  = '<i class="wi wi-lightning"></i>';
    break;
    case '46': var icon  = '<i class="wi wi-snow"></i>';
    break;
    case '47': var icon  = '<i class="wi wi-thunderstorm"></i>';
    break;
    case '3200': var icon  =  '<i class="wi wi-cloud"></i>';
    break;
    default: var icon  =  '<i class="wi wi-cloud"></i>';
    break;
  }
 
  return icon;
 
}
        
        </script>

</script>

</body>
</html>